
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Menu API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-808f3e30.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-e9bde216.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-2beac438.svg" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#menu-api" class="toc-h1 toc-link" data-title="Menu API">Menu API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#welcome-to-menu-api" class="toc-h2 toc-link" data-title="Welcome to Menu API!">Welcome to Menu API!</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authentication-api" class="toc-h1 toc-link" data-title="Authentication API">Authentication API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#registration-sign-up" class="toc-h2 toc-link" data-title="Registration / Sign-up">Registration / Sign-up</a>
                  </li>
                  <li>
                    <a href="#login" class="toc-h2 toc-link" data-title="Login">Login</a>
                  </li>
                  <li>
                    <a href="#logout" class="toc-h2 toc-link" data-title="Logout">Logout</a>
                  </li>
                  <li>
                    <a href="#manage-refresh-token" class="toc-h2 toc-link" data-title="Manage refresh token">Manage refresh token</a>
                  </li>
                  <li>
                    <a href="#forgot-password" class="toc-h2 toc-link" data-title="Forgot password">Forgot password</a>
                  </li>
                  <li>
                    <a href="#reset-password" class="toc-h2 toc-link" data-title="Reset password">Reset password</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#query-api" class="toc-h1 toc-link" data-title="Query API">Query API</a>
          </li>
          <li>
            <a href="#category-api" class="toc-h1 toc-link" data-title="Category API">Category API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-all-categories" class="toc-h2 toc-link" data-title="Get all categories">Get all categories</a>
                  </li>
                  <li>
                    <a href="#add-a-categories" class="toc-h2 toc-link" data-title="Add a categories">Add a categories</a>
                  </li>
                  <li>
                    <a href="#get-a-specific-category" class="toc-h2 toc-link" data-title="Get a specific category">Get a specific category</a>
                  </li>
                  <li>
                    <a href="#update-a-specific-category" class="toc-h2 toc-link" data-title="Update a specific category">Update a specific category</a>
                  </li>
                  <li>
                    <a href="#delete-a-specific-category" class="toc-h2 toc-link" data-title="Delete a specific category">Delete a specific category</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#menu-item-api" class="toc-h1 toc-link" data-title="Menu Item API">Menu Item API</a>
          </li>
          <li>
            <a href="#restaurant-api" class="toc-h1 toc-link" data-title="Restaurant API">Restaurant API</a>
          </li>
          <li>
            <a href="#review-api" class="toc-h1 toc-link" data-title="Review API">Review API</a>
          </li>
          <li>
            <a href="#user-api" class="toc-h1 toc-link" data-title="User API">User API</a>
          </li>
          <li>
            <a href="#dsci-api" class="toc-h1 toc-link" data-title="DSCI API">DSCI API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#reviews" class="toc-h2 toc-link" data-title="Reviews">Reviews</a>
                  </li>
                  <li>
                    <a href="#user-preference" class="toc-h2 toc-link" data-title="User preference">User preference</a>
                  </li>
                  <li>
                    <a href="#search-results" class="toc-h2 toc-link" data-title="Search results">Search results</a>
                  </li>
                  <li>
                    <a href="#restaurant-menu" class="toc-h2 toc-link" data-title="Restaurant menu">Restaurant menu</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#models" class="toc-h1 toc-link" data-title="Models">Models</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#category" class="toc-h2 toc-link" data-title="Category">Category</a>
                  </li>
                  <li>
                    <a href="#menu-item" class="toc-h2 toc-link" data-title="Menu Item">Menu Item</a>
                  </li>
                  <li>
                    <a href="#restaurant" class="toc-h2 toc-link" data-title="Restaurant">Restaurant</a>
                  </li>
                  <li>
                    <a href="#review" class="toc-h2 toc-link" data-title="Review">Review</a>
                  </li>
                  <li>
                    <a href="#user" class="toc-h2 toc-link" data-title="User">User</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#error-ids" class="toc-h2 toc-link" data-title="Error Ids">Error Ids</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://github.com/eatwithmenu/menu-backend'>View Menu Backend Github Repo</a></li>
            <li><a href='https://github.com/eatwithmenu/menu-dsci'>View Menu DSCI Github Repo</a></li>
            <li><a href='https://github.com/slatedocs/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='menu-api'>Menu API</h1><h2 id='welcome-to-menu-api'>Welcome to Menu API!</h2><h3 id='contributors'>Contributors:</h3>
<ul>
<li>Sai Sriram</li>
<li>Colin King</li>
<li>Seung Hun Jang</li>
<li>Timothy Goh</li>
<li>Michael Sprintson</li>
</ul>
<h3 id='useful-links'>Useful Links:</h3>
<ul>
<li><a href="https://github.com/slatedocs/slate/wiki/Markdown-Syntax">Markdown Syntax Link</a></li>
<li><a href="https://github.com/slatedocs/slate/wiki/Using-Slate-in-Docker">How to run Slate locally using Docker</a></li>
</ul>
<h1 id='authentication-api'>Authentication API</h1><h2 id='registration-sign-up'>Registration / Sign-up</h2><h3 id='post-to-auth-signup'>POST to /auth/signup/</h3><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># User data includes all required fields of User model:
</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">"username"</span><span class="p">:</span> <span class="s">"example_username"</span><span class="p">,</span> <span class="s">"password"</span><span class="p">:</span> <span class="s">"example_password"</span><span class="p">,</span> <span class="s">"email"</span><span class="p">:</span> <span class="s">"example@example.com"</span><span class="p">,</span> <span class="s">"phone"</span><span class="p">:</span> <span class="s">"111-111-1111"</span><span class="p">,</span> <span class="s">"access"</span><span class="p">:</span> <span class="p">{</span><span class="s">"user"</span><span class="p">:</span> <span class="s">"true"</span><span class="p">,</span> <span class="s">"admin"</span><span class="p">:</span> <span class="s">"false"</span><span class="p">},</span>  <span class="s">"restrictions"</span><span class="p">:</span> <span class="p">[</span><span class="s">"vegetarian"</span><span class="p">,</span> <span class="s">"vegan"</span><span class="p">],</span> <span class="s">"preferences"</span><span class="p">:</span> <span class="p">{</span><span class="s">"Sushi"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s">"Asian"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s">"Latin American"</span><span class="p">:</span> <span class="mi">1</span><span class="p">}}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="s">"https://www.menubackend.com/auth/signup/"</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span> <span class="c1"># json=data automatically handles Content-Type header
</span><span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>{
    &quot;result&quot;: {
        &quot;id&quot;: &quot;5efa368ac5fab88355ffa9c0&quot;
    }
}</p>
</blockquote>

<p>Registering a user is performed by sending a POST request to the endpoint at <code>/auth/signup/</code>. The body of the POST includes user information, including all required fields and any optional fields in the <a href="#user">user</a> model. The header must include <code>Content-Type: application/json</code>. If the username or email is already taken, returns an <a href="#errors">error</a> response. Upon success, the user&#39;s id is returned.</p>
<h2 id='login'>Login</h2><h3 id='post-to-auth-login-native-login'>POST to /auth/login/ -- Native login</h3><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="c1"># Native user's password and email:
</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">"password"</span><span class="p">:</span> <span class="s">"example_password"</span><span class="p">,</span> <span class="s">"email"</span><span class="p">:</span> <span class="s">"example@example.com"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="s">"https://www.menubackend.com/auth/login/"</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>{
    &quot;result&quot;: {
        &quot;access_token&quot;: &quot;eyJ0eXAiOiJKV1QiLCJhbGciO...&quot;,
        &quot;logged_in_as&quot;: &quot;example_username&quot;,
        &quot;refresh_token&quot;: &quot;eyJ0eXAiOiJKV1QiLCJhbGciO...&quot;
    }
}</p>
</blockquote>

<p>The native login API takes a POST request containing the user&#39;s email and password. If successful, returns a JSON response containing a newly created access token and refresh token. If the user has not already registered (i.e., is not on the database), tokens will not be issued and an <a href="#errors">error</a> response is returned. Again requires the <code>Content-Type: application/json</code> header.</p>
<h3 id='post-to-auth-login-google-google-login'>POST to /auth/login/google/ -- Google login</h3><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># Google user's ID token obtained from Google's login API:
</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">"id_token"</span><span class="p">:</span> <span class="s">"insert_google_id_token_here"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="s">"https://www.menubackend.com/auth/login/google/"</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>{
    &quot;result&quot;: {
        &quot;access_token&quot;: &quot;eyJ0eXAiOiJKV1QiLCJhbGciO...&quot;,
        &quot;logged_in_as&quot;: &quot;example_username&quot;,
        &quot;refresh_token&quot;: &quot;eyJ0eXAiOiJKV1QiLCJhbGciO...&quot;
    }
}</p>
</blockquote>

<p>Google login takes a POST request containing the user&#39;s id token obtained from Google&#39;s login API. If successful, returns a JSON response containing a newly created access token and refresh token. If the user has not already registered (i.e., is not on the database), tokens will not be issued and an <a href="#errors">error</a> response is returned. Again requires the <code>Content-Type: application/json</code> header.</p>

<p>A successful login attempt provides the user with a valid <strong>access token</strong> and <strong>refresh token</strong>. As its name suggests, the access token is used to <em>access</em> the backend&#39;s protected endpoints. However, the access token has a very limited lifespan of a few mins. Once the access token expires, the refresh token, which has a much longer lifespan of several hours, can be used to obtain a new access token using the <a href="#manage-refresh-token">refresh</a> endpoint.</p>
<h2 id='logout'>Logout</h2><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># First revoke the current access token:
</span><span class="n">data</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># Empty POST body
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer insert_access_token_here'</span><span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="s">"https://www.menubackend.com/auth/logout/"</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>{
    &quot;result&quot;: &quot;Logout successful. Access token successfully revoked.&quot;
}</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># Next revoke the current refresh token:
</span><span class="n">data</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># Empty POST body
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer insert_refresh_token_here'</span><span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="s">"https://www.menubackend.com/auth/logout2/"</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>{
    &quot;result&quot;: &quot;Logout successful. Refresh token successfully revoked.&quot;
}</p>
</blockquote>
<h3 id='post-to-auth-logout-and-auth-logout2'>POST to /auth/logout/ and /auth/logout2/</h3>
<p>After login, the frontend user possesses an <strong>access token</strong> and a <strong>refresh token</strong>. When logging out, the backend needs to revoke both of these tokens so they are no longer viable. To do this, the logout process provides two endpoints: <code>/auth/logout/</code> and <code>/auth/logout2/</code>, which revoke the active access token and refresh token, respectively. The POST body can be empty, but <code>/auth/logout/</code> requires the access token header <code>Authorization: Bearer insert_access_token_here</code>, and <code>/auth/logout2/</code> requires the refresh token header <code>Authorization: Bearer insert_refresh_token_here</code>. Upon success, a success message is returned in both cases.</p>
<h2 id='manage-refresh-token'>Manage refresh token</h2><h3 id='post-to-auth-refresh'>POST to /auth/refresh/</h3><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># Obtain a new valid access token using a valid refresh token:
</span><span class="n">data</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># Empty POST body
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer insert_refresh_token_here'</span><span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="s">"https://www.menubackend.com/auth/refresh/"</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>{
    &quot;result&quot;: {&quot;access_token&quot;: &quot;eyJ0eXAiOiJKV1QiLCJhbGciO...&quot;}
}</p>
</blockquote>

<p>Sending a POST to this endpoint with a valid refresh token in the headers (<code>Authorization: Bearer insert_refresh_token_here</code>) issues a new valid access token.</p>
<h2 id='forgot-password'>Forgot password</h2><h3 id='post-to-auth-forgot'>POST to /auth/forgot</h3><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">"email"</span><span class="p">:</span> <span class="s">"example@example.com"</span><span class="p">}</span> <span class="c1"># email in the post body
</span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="s">"https://www.menubackend.com/auth/forgot/"</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>{&#39;result&#39;: &#39;An email has been sent if this is a valid Menu email.&#39;}</p>
</blockquote>

<p><strong>[This endpoint is under construction. We need to set up a menu email first]</strong> Sending a POST to this endpoint with a user&#39;s email in the body will send an email to that address with a token in the email body. This token will be included in the body of the post request to the <a href="#reset-password">reset</a> endpoint.</p>
<h2 id='reset-password'>Reset password</h2><h3 id='post-to-auth-reset'>POST to /auth/reset/</h3><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">"reset_token"</span><span class="p">:</span> <span class="s">"insert_reset_token_from_email_here"</span><span class="p">,</span> <span class="s">"password"</span><span class="p">:</span> <span class="s">"new_password"</span><span class="p">}</span> <span class="c1"># reset token obtained from the email sent out by forgot endpoint
</span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="s">"https://www.menubackend.com/auth/forgot/"</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>{&#39;result&#39;: &#39;Successfully reset password.&#39;}</p>
</blockquote>

<p><strong>[This endpoint works with /auth/forgot/, so is still under construction.</strong> Sending a POST to this endpoint with the reset token in the request body as well as the user&#39;s new password. The endpoint will update the user&#39;s password and send a confirmation email to them that the password has been changed.</p>
<h1 id='query-api'>Query API</h1><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">data</span> <span class="o">=</span> <span class="p">{</span> <span class="s">"name"</span><span class="p">:</span> <span class="s">"Avalon Diner"</span><span class="p">,</span> <span class="s">"addr"</span><span class="p">:</span> <span class="s">"12810 Southwest Fwy. Stafford, TX 77477"</span><span class="p">}</span> <span class="c1"># query the database for restaurant named Avalon diner at that address
</span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="s">"https://www.menubackend.com/query/restaurant/"</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>{
        &quot;result&quot;: [
            {
                &quot;_id&quot;: ...
                &quot;addr&quot;: &quot;12810 Southwest Fwy. Stafford, TX 77477&quot;
                ... etc ...
            }
        ]
    }</p>
</blockquote>

<p>Resource for querying the mongoDB Restaurant collection from an HTTP request. Post request must contain header Content-Type: application/json and the body must be a JSON query. Response is a JSON with one key -- &quot;result&quot; whose corresponding value is a JSON List containing JSON dicts for every restuarant matching the query. If the JSON List is empty, nothing in the database matched the query.</p>

<p>Analagous post requests can be sent to the <code>/query/item/</code> endpoint to query the database for menu items.</p>
<h1 id='category-api'>Category API</h1><h2 id='get-all-categories'>Get all categories</h2><h3 id='get-to-categories'>GET to /categories/</h3><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer insert_access_token_here'</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"https://www.menubackend.com/category/"</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>{&#39;result&#39;: [&#39;array of all categories&#39;]}</p>
</blockquote>

<p>To obtain all the categories in the database, send a get request to this endpoint with an access token in the header.</p>
<h2 id='add-a-categories'>Add a categories</h2><h3 id='post-to-categories'>POST to /categories/</h3><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer insert_access_token_here'</span><span class="p">}</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">"name"</span><span class="p">:</span> <span class="s">"category_name"</span><span class="p">,</span> <span class="s">"description"</span><span class="p">:</span> <span class="s">"category_description"</span><span class="p">,</span> <span class="s">"items"</span><span class="p">:[</span><span class="s">"array of references to item model"</span><span class="p">]}</span><span class="c1"># Must be admin user token
</span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="s">"https://www.menubackend.com/category/"</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>{&#39;result&#39;: {&#39;id&#39;: &#39;category id&#39;}</p>
</blockquote>

<p>To add a category to the database, send a post request to this endpoint with the access token <strong>from a user with admin priviledges</strong> (admin = true in the access field of the <a href="#user">user</a> model). If added successfully, returns the category id.</p>
<h2 id='get-a-specific-category'>Get a specific category</h2><h3 id='get-to-category-lt-category_id-gt'>GET to <code>/category/&lt;category_id&gt;/</code></h3><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer insert_access_token_here'</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="s">"https://www.menubackend.com/category/"</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>{&#39;result&#39;: {&quot;_id&quot;: {&quot;$oid&quot;: &quot;category_id&quot;}, &quot;description&quot;: &quot;category_description&quot;, &quot;items&quot;: [], &quot;tags&quot;:[], &quot;name&quot;:&quot;category_name&quot;}}</p>
</blockquote>

<p>To obtain a specific category, send a get request to this endpoint with an access token in the header and category id in the URL.</p>
<h2 id='update-a-specific-category'>Update a specific category</h2><h3 id='patch-to-category-lt-category_id-gt'>PATCH to <code>/category/&lt;category_id&gt;/</code></h3><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer insert_access_token_here'</span><span class="p">}</span> <span class="c1"># Must be admin user token
</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">"description"</span><span class="p">:</span> <span class="s">"category description update"</span><span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="s">"https://www.menubackend.com/category/category_id"</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>{&#39;result&#39;: {&quot;_id&quot;: {&quot;$oid&quot;: &quot;category_id&quot;}, &quot;description&quot;: &quot;category description update&quot;, &quot;items&quot;: [], &quot;tags&quot;:[], &quot;name&quot;:&quot;category_name&quot;}}</p>
</blockquote>

<p>To update a specific category, send a patch request to this endpoint with an <strong>admin</strong> access token in the header and category id in the URL, and the updated category fields in the body.</p>
<h2 id='delete-a-specific-category'>Delete a specific category</h2><h3 id='delete-to-category-lt-category_id-gt'>DELETE to <code>/category/&lt;category_id&gt;/</code></h3><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer insert_access_token_here'</span><span class="p">}</span> <span class="c1"># Must be admin user token
</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">delete</span><span class="p">(</span><span class="s">"https://www.menubackend.com/category/category_id"</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span> 
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>{&#39;result&#39;: {&quot;_id&quot;: {&quot;$oid&quot;: &quot;category_id&quot;}, &quot;description&quot;: &quot;category description update&quot;, &quot;items&quot;: [], &quot;tags&quot;:[], &quot;name&quot;:&quot;category_name&quot;}}</p>
</blockquote>

<p>To delete a specific category, send a delete request to this endpoint with an <strong>admin</strong> access token in the header and category id in the URL, and the updated category fields in the body.</p>
<h1 id='menu-item-api'>Menu Item API</h1>
<p>The Item API provides basic CRUD functionality which is very similar to the other CRUD APIs in our system.
To the <code>\items\</code> endpoint, we support:</p>

<ul>
<li>GET request (with a valid access token in the header), which returns all items in the database.</li>
<li>POST request (with an <strong>admin</strong> access token in the header), which allows creation of a new menu item on the database, where the POST body contains all the requireds fields of the <a href="#menu-item">menu item</a> model.</li>
</ul>

<p>To the <code>\item\&lt;item_id&gt;\</code> endpoint, we support:</p>

<ul>
<li>GET request (with a valid access token in the header), which returns the specific item with <code>item_id</code> in the database.</li>
<li>PATCH request (with an <strong>admin</strong> access token in the header), which updates the item with <code>item_id</code> in the database with the request&#39;s body contents.</li>
<li>DELETE request (with an <strong>admin</strong> access token in the header), which deletes the item with <code>item_id</code> in the database.</li>
</ul>
<h1 id='restaurant-api'>Restaurant API</h1>
<p>The Restaurant API provides basic CRUD functionality which is very similar to the other CRUD APIs in our system.
To the <code>\restaurants\</code> endpoint, we support:</p>

<ul>
<li>GET request (with a valid access token in the header), which returns all restaurants in the database.</li>
<li>POST request (with an <strong>admin</strong> access token in the header), which allows creation of a new restaurant on the database, where the POST body contains all the requireds fields of the <a href="#restaurant">restaurant</a> model.</li>
</ul>

<p>To the <code>\restaurant\&lt;restaurant_id&gt;\</code> endpoint, we support:</p>

<ul>
<li>GET request (with a valid access token in the header), which returns the specific restaurant with <code>restaurant_id</code> in the database.</li>
<li>PATCH request (with an <strong>admin</strong> access token in the header), which updates the restaurant with <code>restaurant_id</code> in the database with the request&#39;s body contents.</li>
<li>DELETE request (with an <strong>admin</strong> access token in the header), which deletes the restaurant with <code>restaurant_id</code> in the database.</li>
</ul>
<h1 id='review-api'>Review API</h1>
<p>The Review API provides basic CRUD functionality which is very similar to the other CRUD APIs in our system.
To the <code>\reviews\</code> endpoint, we support:</p>

<ul>
<li>GET request (with a valid access token in the header), which returns all reviews in the database.</li>
<li>POST request (with an <strong>admin</strong> access token in the header), which allows creation of a new review on the database, where the POST body contains all the requireds fields of the <a href="#review">review</a> model.</li>
</ul>

<p>To the <code>\review\&lt;review_id&gt;\</code> endpoint, we support:</p>

<ul>
<li>GET request (with a valid access token in the header), which returns the specific review with <code>review_id</code> in the database.</li>
<li>PATCH request (with an <strong>admin</strong> access token in the header), which updates the review with <code>review_id</code> in the database with the request&#39;s body contents.</li>
<li>DELETE request (with an <strong>admin</strong> access token in the header), which deletes the review with <code>review_id</code> in the database.</li>
</ul>
<h1 id='user-api'>User API</h1>
<p>The User API provides basic CRUD functionality which is very similar to the other CRUD APIs in our system.
To the <code>\users\</code> endpoint, we support:</p>

<ul>
<li>GET request (with an <strong>admin</strong> access token in the header), which returns all users in the database.</li>
<li>POST request (with an <strong>admin</strong> access token in the header), which allows creation of a new user on the database, where the POST body contains all the requireds fields of the <a href="#user">user</a> model.</li>
</ul>

<p>To the <code>\user\&lt;user_id&gt;\</code> endpoint, we support:</p>

<ul>
<li>GET request (with an <strong>admin</strong> access token in the header, or with the jwt id of access token matching with <code>&lt;user_id&gt;</code> in the request param), which returns the specific user with <code>user_id</code> in the database.</li>
<li>PATCH request (with an <strong>admin</strong> access token in the header), which updates the user with <code>user_id</code> in the database with the request&#39;s body contents.</li>
<li>DELETE request (with an <strong>admin</strong> access token in the header), which deletes the user with <code>user_id</code> in the database.</li>
</ul>
<h1 id='dsci-api'>DSCI API</h1>
<p><strong>Note:</strong> Frontend should NOT call this directly; you should call backend&#39;s endpoint which then calls these.</p>
<h2 id='reviews'>Reviews</h2><h3 id='post-to-usefulreviewsgen'>POST to /usefulreviewsgen/</h3><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># Get useful reviews
</span><span class="n">rhash</span> <span class="o">=</span> <span class="s">'0b7f3d99-13ce-4d45-955e-71902c4cb9a4'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">awsurl</span> <span class="o">+</span> <span class="s">'usefulreviewsgen/'</span><span class="p">,</span> <span class="n">json</span> <span class="o">=</span> <span class="p">{</span><span class="s">'rhash'</span><span class="p">:</span><span class="n">rhash</span><span class="p">})</span>
<span class="n">newdict</span> <span class="o">=</span> <span class="n">ast</span><span class="p">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'Infinity'</span><span class="p">,</span> <span class="s">'-1'</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">'false'</span><span class="p">,</span> <span class="s">'False'</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">'null'</span><span class="p">,</span><span class="s">'None'</span><span class="p">))</span>
</code></pre></div>
<blockquote>
<p>[
    {
        &#39;name&#39;: &#39;RevrendDr&#39;,
        &#39;city&#39;: &#39;Kansas City&#39;,
        &#39;text&#39;: &#39;The mushroom risotto was delicious, as was the lobster bisque.  Also had the lamb shank, which was nice and tender.  The white sangria on special every Saturday night was also a big hit.  Our waitress was sweet and attentive, if a little new.  Will definitely go back for another visit.&#39;,
        &#39;overallrating&#39;: &#39;5&#39;,
        &#39;subratings&#39;:
            {
                &#39;Overall&#39;: &#39;5&#39;, 
                &#39;food&#39;: &#39;5&#39;,
                &#39;service&#39;: &#39;4&#39;,
                &#39;ambience&#39;: &#39;4&#39;
            }
   }, ... # Other reviews left out for clarity
]</p>
</blockquote>

<p>Getting useful reviews is performed by sending a POST request to the endpoint at <code>/usefulreviewsgen/</code>. The body of the POST includes <code>rhash</code>. The header must include <code>Content-Type: application/json</code>. Upon success, a list of dictionaries representing reviews is returned.</p>

<p><strong>Inputs</strong></p>

<ul>
<li><code>rhash</code>: the restaurant hash</li>
</ul>

<p><strong>Outputs</strong></p>

<ul>
<li>List of dictionaries, each one containing:

<ul>
<li><code>name</code> : <code>&lt;name of the reviewer&gt;</code></li>
<li><code>city</code> : <code>&lt;city the reviewer is from (i think)&gt;</code></li>
<li><code>text</code> : <code>&lt;review text&gt;</code></li>
<li><code>overallrating</code> : <code>&lt;rating of the review&gt;</code></li>
<li><code>subratings</code> : <code>&lt;dict of subratings the user gave the restaurant&gt;</code></li>
</ul></li>
</ul>
<h2 id='user-preference'>User preference</h2><h3 id='post-to-usrprefgen'>POST to /usrprefgen/</h3><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># Generate user preferences
</span><span class="n">prefdict</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Sushi'</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s">'Asian'</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s">'Latin Ameridfasdfcan'</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
<span class="n">test_cluster_group_prefs</span> <span class="o">=</span> <span class="p">{</span><span class="s">'0'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'2'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'3'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">'6'</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">awsurl</span> <span class="o">+</span> <span class="s">'usrprefgen/'</span><span class="p">,</span> <span class="n">json</span> <span class="o">=</span> <span class="p">{</span><span class="s">'prefscu'</span><span class="p">:</span><span class="n">prefdict</span><span class="p">,</span> <span class="s">'prefscl'</span><span class="p">:</span> <span class="n">test_cluster_group_prefs</span><span class="p">})</span>
<span class="n">utdl</span> <span class="o">=</span> <span class="n">ast</span><span class="p">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'Infinity'</span><span class="p">,</span> <span class="s">'-1'</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">'false'</span><span class="p">,</span> <span class="s">'False'</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">'null'</span><span class="p">,</span><span class="s">'None'</span><span class="p">))</span>
</code></pre></div>
<blockquote>
<p>[
    [[&#39;piece&#39;, &#39;succulent&#39;], 0.0039, 1.0],
    [[&#39;mole&#39;, &#39;annie&#39;], 0.0039, 1.0],
    [[&#39;crawfish&#39;, &#39;étouffée&#39;], 0.0039, 1.0],
    [[&#39;pickle&#39;, &#39;lodge&#39;], 0.0039, 1.0]
]</p>
</blockquote>

<p>Takes a POST request optionally containing a cuisine preferences dictionary and/or a cluster preferences dictionary. Returns a list of lists representing the user&#39;s preferences.</p>

<p><strong>Inputs</strong></p>

<ul>
<li>(Should be Optional, but required for now) <code>prefcu</code>: a dictionary of cuisine names mapped to the score for that cuisine, which is a boundless integer, although this would work best with the score contained between -10 and 10. If any cuisine name is incorrect, that will be output in <code>log.txt</code>. All possible cuisines are listed on the right.

<ul>
<li>Example: <code>{&#39;Sushi&#39;: 10, &#39;Asian&#39;: 6, &#39;Latin American&#39;: 10}</code></li>
</ul></li>
<li>(Should be Optional, but required for now) <code>prefcl</code>: shows the user preference for each of the 54 clusters. The input dictionary is in the form of the string index of the cluster mapped to the integer score associated to that cluster. The keys can be any integer [0, 54] but 54 is kind of a useless cluster so it shouldn&#39;t be used as a key. The values can be any integer but should be constrained to [-10, 10] for best results. If an invalid key is provided, then it will be ignored and spit out in <code>log.txt</code>

<ul>
<li>Example: <code>{&#39;0&#39;: 1, &#39;2&#39;: 2, &#39;3&#39;: 3, &#39;6&#39;:2}</code></li>
</ul></li>
</ul>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># All possible cuisines (as of July 12, 2020)
</span><span class="kn">from</span> <span class="nn">reccomender</span> <span class="kn">import</span> <span class="n">make_from_cluster</span> <span class="k">as</span> <span class="n">mfc</span>
<span class="n">mfc</span><span class="p">.</span><span class="n">cuisine_list</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>

<span class="p">[</span><span class="s">'American'</span><span class="p">,</span> <span class="s">'Seafood'</span><span class="p">,</span> <span class="s">'Steak'</span><span class="p">,</span> <span class="s">'Italian'</span><span class="p">,</span> <span class="s">'Steakhouse'</span><span class="p">,</span> <span class="s">'Contemporary American'</span><span class="p">,</span> <span class="s">'Southern'</span><span class="p">,</span> <span class="s">'Mexican'</span><span class="p">,</span> <span class="s">'Japanese'</span><span class="p">,</span> <span class="s">'French'</span><span class="p">,</span> <span class="s">'Wine Bar'</span><span class="p">,</span> <span class="s">'Comfort Food'</span><span class="p">,</span> <span class="s">'Contemporary Italian'</span><span class="p">,</span> <span class="s">'Latin American'</span><span class="p">,</span> <span class="s">'Tex-Mex'</span><span class="p">,</span> <span class="s">'Cajun'</span><span class="p">,</span> <span class="s">'Pizzeria'</span><span class="p">,</span> <span class="s">'Mediterranean'</span><span class="p">,</span> <span class="s">'Sushi'</span><span class="p">,</span> <span class="s">'International'</span><span class="p">,</span> <span class="s">'Lounge'</span><span class="p">,</span> <span class="s">'Spanish'</span><span class="p">,</span> <span class="s">'Asian'</span><span class="p">,</span> <span class="s">'Global'</span><span class="p">,</span> <span class="s">'Brazilian'</span><span class="p">,</span> <span class="s">'Shellfish'</span><span class="p">,</span> <span class="s">'Creole / Cajun / Southern'</span><span class="p">,</span> <span class="s">'Bar / Lounge / Bottle Service'</span><span class="p">,</span> <span class="s">'Tapas / Small Plates'</span><span class="p">,</span> <span class="s">'Contemporary Southern'</span><span class="p">,</span> <span class="s">'Bistro'</span><span class="p">,</span> <span class="s">'Brazilian Steakhouse'</span><span class="p">,</span> <span class="s">'European'</span><span class="p">,</span> <span class="s">'Pub'</span><span class="p">,</span> <span class="s">'Oyster Bar'</span><span class="p">,</span> <span class="s">'Cocktail Bar'</span><span class="p">,</span> <span class="s">'Chinese'</span><span class="p">,</span> <span class="s">'Contemporary French'</span><span class="p">,</span> <span class="s">'South American'</span><span class="p">,</span> <span class="s">'Fusion / Eclectic'</span><span class="p">,</span> <span class="s">'Farm-to-table'</span><span class="p">,</span> <span class="s">'Gastro Pub'</span><span class="p">,</span> <span class="s">'Sports Bar'</span><span class="p">,</span> <span class="s">'Indian'</span><span class="p">,</span> <span class="s">'Contemporary French / American'</span><span class="p">,</span> <span class="s">'French American'</span><span class="p">,</span> <span class="s">'Barbecue'</span><span class="p">,</span> <span class="s">'Southwest'</span><span class="p">,</span> <span class="s">'Continental'</span><span class="p">,</span> <span class="s">'Vegetarian / Vegan'</span><span class="p">,</span> <span class="s">'Southern African'</span><span class="p">,</span> <span class="s">'Afternoon Tea'</span><span class="p">,</span> <span class="s">'Contemporary Mexican'</span><span class="p">,</span> <span class="s">'Latin / Spanish'</span><span class="p">,</span> <span class="s">'Dessert'</span><span class="p">,</span> <span class="s">'Grill'</span><span class="p">,</span> <span class="s">'Lebanese'</span><span class="p">,</span> <span class="s">'Korean'</span><span class="p">,</span> <span class="s">'Sicilian'</span><span class="p">,</span> <span class="s">'Peruvian'</span><span class="p">,</span> <span class="s">'Chinese (Canton)'</span><span class="p">,</span> <span class="s">'Fish'</span><span class="p">,</span> <span class="s">'Burgers'</span><span class="p">,</span> <span class="s">'Wild Game'</span><span class="p">,</span> <span class="s">'Mexican / Southwestern'</span><span class="p">,</span> <span class="s">'Contemporary Asian'</span><span class="p">,</span> <span class="s">'Vietnamese'</span><span class="p">,</span> <span class="s">'Traditional Mexican'</span><span class="p">,</span> <span class="s">'Breakfast'</span><span class="p">,</span> <span class="s">'Organic'</span><span class="p">,</span> <span class="s">'Regional Japanese'</span><span class="p">,</span> <span class="s">'Prime Rib'</span><span class="p">,</span> <span class="s">'Dim Sum'</span><span class="p">,</span> <span class="s">'Meat'</span><span class="p">,</span> <span class="s">'Contemporary Indian'</span><span class="p">,</span> <span class="s">'Winery'</span><span class="p">,</span> <span class="s">'Halal'</span><span class="p">,</span> <span class="s">'Pakistani'</span><span class="p">,</span> <span class="s">'Argentinean'</span><span class="p">,</span> <span class="s">'Greek'</span><span class="p">,</span> <span class="s">'Creative Japanese'</span><span class="p">,</span> <span class="s">'Teppanyaki'</span><span class="p">,</span> <span class="s">'Ecuadorian'</span><span class="p">,</span> <span class="s">'Cuban'</span><span class="p">,</span> <span class="s">'Soul food'</span><span class="p">,</span> <span class="s">'British'</span><span class="p">,</span> <span class="s">'Beer Garden'</span><span class="p">,</span> <span class="s">'Austrian'</span><span class="p">,</span> <span class="s">'German'</span><span class="p">,</span> <span class="s">'Rotisserie Chicken'</span><span class="p">,</span> <span class="s">'Ramen'</span><span class="p">,</span> <span class="s">'Regional Mexican'</span><span class="p">,</span> <span class="s">'Café'</span><span class="p">,</span> <span class="s">'Modern European'</span><span class="p">,</span> <span class="s">'Northern Mexican'</span><span class="p">,</span> <span class="s">'Thai'</span><span class="p">,</span> <span class="s">'English'</span><span class="p">,</span> <span class="s">'Fondue'</span><span class="p">]</span>
</code></pre></div>
<p><strong>Outputs</strong></p>

<ul>
<li>List of lists with three items - the first being a 2-length list of <code>main ingredient name</code> and <code>descriptor</code>, and the second being the float <code>item score</code> of that ingredient and the third the integer <code>confidence index</code>, or how many times that ingredient has shown up in the input preferences.

<ul>
<li>See the code example on the right for an example.</li>
</ul></li>
</ul>
<h2 id='search-results'>Search results</h2><h3 id='post-to-search'>POST to /search/</h3><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># Search for chinese restaurants with delivery
</span>
<span class="c1"># utdl = result of previous call to /userprefgen/
</span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">awsurl</span> <span class="o">+</span> <span class="s">'search/'</span><span class="p">,</span> <span class="n">json</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'search_string'</span><span class="p">:</span><span class="s">'chinese'</span><span class="p">,</span> <span class="c1"># breaks properly
</span>    <span class="s">'submenus'</span><span class="p">:[</span><span class="s">'delivery'</span><span class="p">],</span> <span class="c1"># non required works
</span>    <span class="s">'prefs'</span><span class="p">:</span><span class="n">utdl</span><span class="p">,</span> <span class="c1"># breaks properly
</span>    <span class="s">'coords'</span><span class="p">:[</span><span class="mf">29.72154017</span><span class="p">,</span> <span class="o">-</span><span class="mf">95.39608383</span><span class="p">],</span> <span class="c1"># non required works
</span>    <span class="s">'restrictions'</span><span class="p">:[],</span> <span class="c1"># non required works
</span>    <span class="s">'prefdict'</span><span class="p">:</span> <span class="p">{</span><span class="s">'locscore'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'rev_sum_score'</span><span class="p">:</span> <span class="mf">0.03</span><span class="p">,</span> <span class="s">'item_sum_score'</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">},</span>
    <span class="s">'page'</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">})</span>
<span class="n">newdict</span> <span class="o">=</span> <span class="n">ast</span><span class="p">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'Infinity'</span><span class="p">,</span> <span class="s">'-1'</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">'false'</span><span class="p">,</span> <span class="s">'False'</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">'null'</span><span class="p">,</span><span class="s">'None'</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">3841689</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span> <span class="c1">// hash of restaurant </span>
    <span class="dl">"</span><span class="s2">items</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span> <span class="c1">// dictionary of items in the top n belonging to that restaurant </span>
      <span class="dl">"</span><span class="s2">82051594</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.3346763757962888</span><span class="p">,</span> <span class="dl">"</span><span class="s2">rev</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span> <span class="c1">// item hash is mapped to the score</span>
      <span class="dl">"</span><span class="s2">21833507</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.3191075257345033</span><span class="p">,</span> <span class="dl">"</span><span class="s2">rev</span><span class="dl">"</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>
      <span class="p">...</span>
    <span class="p">},</span>
    <span class="dl">"</span><span class="s2">item_sum_score</span><span class="dl">"</span><span class="p">:</span> <span class="mf">1.307567803061584</span><span class="p">,</span> <span class="c1">// sum of item scores for that restaurant</span>
    <span class="dl">"</span><span class="s2">rev_sum_score</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="c1">// the sum of how the items were perceived in the reviews</span>
    <span class="dl">"</span><span class="s2">loc</span><span class="dl">"</span><span class="p">:</span> <span class="mf">21.016145659571272</span><span class="p">,</span> <span class="c1">// how far away the restaurant is in miles</span>
    <span class="dl">"</span><span class="s2">locscore</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.005</span> <span class="c1">// miles of location converted to a score</span>
  <span class="p">},</span>
  <span class="p">...</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="cm">/* All possible submenu filters */</span>
<span class="nx">main</span><span class="p">,</span> <span class="nx">takeout</span><span class="p">,</span> <span class="nx">delivery</span><span class="p">,</span> <span class="nx">dessert</span><span class="p">,</span> <span class="nx">dinner</span><span class="p">,</span> <span class="nx">lunch</span><span class="p">,</span> <span class="nx">breakfast</span><span class="p">,</span> <span class="nx">pizza</span><span class="p">,</span> <span class="nx">sushi</span><span class="p">,</span> <span class="nx">appetizers</span><span class="p">,</span> <span class="nx">kids</span><span class="p">,</span> <span class="nx">brunch</span>
</code></pre></div>
<p>Takes a POST request containing a search query and other parameters. Returns a list of dictionaries representing the recommended restaurants and their basic information.</p>

<p><strong>Inputs</strong></p>

<ul>
<li><code>prefs</code>: the output of the user preference endpoint, which is explained in detail in the <a href="#user-preference">user-preferences</a> endpoint in the &quot;results&quot; section. This is required.</li>
<li><code>page</code>: An integer to represent which page the user has clicked on. The first page is page 0. This is required.

<ul>
<li>Example: <code>0</code>, <code>1</code>, <code>2</code>, <code>3</code>...</li>
</ul></li>
<li>(Optional) <code>coords</code>: a two-length list of latitude and longitude coordinatres from the user&#39;s location. This is optional, and if not provided the <code>loc</code> and <code>locscore</code> fields will be empty. 

<ul>
<li>Example: <code>[29.72154017, -95.39608383]</code></li>
</ul></li>
<li>(Optional) <code>restrictions</code>: a list of restrictions the user selected. For now, only &#39;vegan&#39; and &#39;vegetarian&#39; are supported.

<ul>
<li>Example: <code>[&#39;vegan&#39;]</code>, <code>[]</code></li>
</ul></li>
<li>(Optional) <code>prefdict</code>: This is a three-length dictionary with keys <code>locscore</code>, <code>rev_sum_score</code>, and <code>item_sum_score</code>. Each of these keys are mapped to a float which represents the importance of location, review score, and item score respectively for the user.</li>
<li>(Optional) <code>search_string</code>: Any string that the user inputs from the search bar. This is supposed to be either a cuisine, restaurant name, cluster name, or food name. This is optional, and if not provided the return will just be the highest rated items for the user.

<ul>
<li>Example: <code>chinese</code>, <code>burgers</code>, <code>chicken</code>, <code>pizza</code></li>
</ul></li>
<li>(Optional) <code>submenus</code>: a list of submenus that the user selects. Can be any combination of strings from the list of all possible submenus (see right). Should either be &#39;all&#39; or a list of other strings. &#39;all&#39; automatically includes all other submenus, so including other submenus with it is redundant. Adding delivery or takeout means only restaurants with delivery or takeout&#39;s menu items are considered.

<ul>
<li>Example: <code>[&#39;all&#39;]</code>, <code>[&#39;delivery&#39;, &#39;dinner&#39;]</code></li>
</ul></li>
</ul>

<p><strong>Outputs</strong></p>

<ul>
<li>List of dictionaries where the restaurant hash is mapped to a dictionary of top items belonging to that restaurant

<ul>
<li>See the code example on the right for an example.</li>
</ul></li>
</ul>
<h2 id='restaurant-menu'>Restaurant menu</h2><h3 id='post-to-rstget'>POST to /rstget/</h3><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># Get recommended menu items for a restaurant 
</span><span class="n">rhash</span> <span class="o">=</span> <span class="s">'0b7f3d99-13ce-4d45-955e-71902c4cb9a4'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">awsurl</span> <span class="o">+</span> <span class="s">'rstget/'</span><span class="p">,</span> <span class="n">json</span> <span class="o">=</span> <span class="p">{</span><span class="s">'rhash'</span><span class="p">:</span><span class="n">rhash</span><span class="p">}),</span> <span class="s">'prefs'</span><span class="p">:</span><span class="n">utdl</span><span class="p">})</span> 
<span class="n">newdict</span> <span class="o">=</span> <span class="n">ast</span><span class="p">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'Infinity'</span><span class="p">,</span> <span class="s">'-1'</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">'false'</span><span class="p">,</span> <span class="s">'False'</span><span class="p">).</span><span class="n">replace</span><span class="p">(</span><span class="s">'null'</span><span class="p">,</span><span class="s">'None'</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
    <span class="dl">"</span><span class="s2">42d9f32b-f4d8-4723-b905-240dcd3324f2</span><span class="dl">"</span><span class="p">:</span>  <span class="c1">// hash of the item</span>
        <span class="p">{</span><span class="dl">"</span><span class="s2">itemscores</span><span class="dl">"</span><span class="p">:</span> 
            <span class="p">[</span> <span class="c1">// list of ingredients, each with a scores dict and the name and description. This structure is consistent for each ingredient, with the 'scores' key mapped to a dictionary of 'score' mapped to the item score, 'n' mapped to the confidence index, 'desc' mapped to the descriptor of that ingredient, and 'name' mapped to the name of that ingredient.</span>
                <span class="p">{</span><span class="dl">"</span><span class="s2">scores</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.829</span><span class="p">,</span> <span class="dl">"</span><span class="s2">n</span><span class="dl">"</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span> <span class="dl">"</span><span class="s2">desc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">tomato</span><span class="dl">"</span><span class="p">},</span> 
                <span class="p">{</span><span class="dl">"</span><span class="s2">scores</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.738</span><span class="p">,</span> <span class="dl">"</span><span class="s2">n</span><span class="dl">"</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span> <span class="dl">"</span><span class="s2">desc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">onion</span><span class="dl">"</span><span class="p">},</span>
                <span class="p">...</span>
            <span class="p">],</span>
            <span class="dl">"</span><span class="s2">score</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.171969300975924</span><span class="p">,</span> <span class="c1">// score of the item's ingredients (float)</span>
            <span class="dl">"</span><span class="s2">hash</span><span class="dl">"</span><span class="p">:</span> <span class="mi">4</span><span class="nx">e17ee65</span><span class="o">-</span><span class="nx">c3ad</span><span class="o">-</span><span class="mi">480</span><span class="nx">d</span><span class="o">-</span><span class="mi">8457</span><span class="o">-</span><span class="mi">1878</span><span class="nx">fc2c146f</span><span class="p">,</span> <span class="c1">// hash of the restaurant it belongs to (string)</span>
            <span class="dl">"</span><span class="s2">submenu</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Lunch Menu</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// submenu the item was found in (string)</span>
            <span class="dl">"</span><span class="s2">submenufilter</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">lunch</span><span class="dl">"</span><span class="p">],</span> <span class="c1">// submenu filter the item was found in (list of strings - constrained to items in all possible submenufilters</span>
            <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">9.00</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// price of the item (string of float)</span>
            <span class="dl">"</span><span class="s2">rev</span><span class="dl">"</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="c1">// accumulated score from the reviews (int))</span>
        <span class="p">}</span>
    <span class="p">...</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="cm">/* All possible submenu filters */</span>
<span class="nx">main</span><span class="p">,</span> <span class="nx">takeout</span><span class="p">,</span> <span class="nx">delivery</span><span class="p">,</span> <span class="nx">dessert</span><span class="p">,</span> <span class="nx">dinner</span><span class="p">,</span> <span class="nx">lunch</span><span class="p">,</span> <span class="nx">breakfast</span><span class="p">,</span> <span class="nx">pizza</span><span class="p">,</span> <span class="nx">sushi</span><span class="p">,</span> <span class="nx">appetizers</span><span class="p">,</span> <span class="nx">kids</span><span class="p">,</span> <span class="nx">brunch</span>
</code></pre></div>
<p>Takes a POST request containing a restaurant hash and (optionally) user preferences. Returns a list of dictionaries representing the recommended menu items and their basic information.</p>

<p><strong>Inputs</strong></p>

<ul>
<li><code>rhash</code>: A UUID of a restraunt in the database. Must be a string with no leading spaces.</li>
<li>(Optional) <code>prefs</code>: the output of the user preference endpoint, which is explained in detail in the <a href="#user-preference">user-preferences</a> in the &quot;results&quot; section. This is optional, and if it is not provided the <code>itemscores</code> key in the results dictionary will map to an empty list. </li>
</ul>

<p><strong>Outputs</strong></p>

<ul>
<li>See the code example on the right for an example and description.</li>
</ul>
<h1 id='models'>Models</h1><h2 id='category'>Category</h2>
<table><thead>
<tr>
<th>Field Name</th>
<th>Code</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td><code>StringField(required=True)</code></td>
<td>String</td>
<td>name of category</td>
<td><strong>Required</strong></td>
</tr>
<tr>
<td>description</td>
<td><code>StringField(required=True)</code></td>
<td>String</td>
<td>description of category</td>
<td><strong>Required</strong></td>
</tr>
<tr>
<td>tags</td>
<td><code>ListField(StringField())</code></td>
<td>Array of String</td>
<td>tags associated with category.</td>
<td></td>
</tr>
<tr>
<td>items</td>
<td><code>ListField(ReferenceField(Item))</code></td>
<td>Array of ObjectID</td>
<td>array of references to <code>Item</code> model.</td>
<td></td>
</tr>
</tbody></table>
<h2 id='menu-item'>Menu Item</h2>
<table><thead>
<tr>
<th>Field Name</th>
<th>Code</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>_id</td>
<td><code>StringField(primary_key=True, required=True)</code></td>
<td>String of length 36</td>
<td>MongoDB Primary Key hash, must be length 36 alphanumeric</td>
<td><strong>Required</strong></td>
</tr>
<tr>
<td>location</td>
<td><code>StringField(required=True)</code></td>
<td>String of length 36</td>
<td>reference to <code>Restaurant</code> model.</td>
<td><strong>Required</strong></td>
</tr>
<tr>
<td>name</td>
<td><code>StringField(required=True)</code></td>
<td>String</td>
<td>name of menu item.</td>
<td><strong>Required</strong></td>
</tr>
<tr>
<td>desc</td>
<td><code>StringField()</code></td>
<td>String</td>
<td>description of menu item.</td>
<td></td>
</tr>
<tr>
<td>price</td>
<td><code>FloatField(required=True)</code></td>
<td>Float</td>
<td>price of menu item.</td>
<td><strong>Required</strong></td>
</tr>
<tr>
<td>image_url</td>
<td><code>StringField()</code></td>
<td>String</td>
<td>url that holds menu item image.</td>
<td></td>
</tr>
<tr>
<td>tags</td>
<td><code>ListField(StringField())</code></td>
<td>Array of String</td>
<td>tags associated with menu item.</td>
<td></td>
</tr>
</tbody></table>
<h2 id='restaurant'>Restaurant</h2><h3 id='restaurant-model'>Restaurant model</h3>
<table><thead>
<tr>
<th>Field Name</th>
<th>Code</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>_id</td>
<td><code>_id = StringField(primary_key=True, required=True)</code></td>
<td>String</td>
<td>MongoDB Primary Key hash, must be length 36 alphanumeric</td>
<td><strong>Required</strong></td>
</tr>
<tr>
<td>name</td>
<td><code>StringField(required=True)</code></td>
<td>String</td>
<td>name of restaurant</td>
<td><strong>Required</strong></td>
</tr>
<tr>
<td>link</td>
<td><code>StringField()</code></td>
<td>String</td>
<td>link to restaurant info</td>
<td></td>
</tr>
<tr>
<td>rating</td>
<td><code>StringField()</code></td>
<td>String</td>
<td>rating of restaurant</td>
<td></td>
</tr>
<tr>
<td>attrs</td>
<td><code>EmbeddedDocumentField(Attributes)</code></td>
<td>Attribute model</td>
<td>attributes of restaurant</td>
<td></td>
</tr>
<tr>
<td>dollarsigncount</td>
<td><code>IntField()</code></td>
<td>Integer</td>
<td>dollar sign indicating price of restaurant</td>
<td></td>
</tr>
<tr>
<td>cuisine</td>
<td><code>StringField()</code></td>
<td>String</td>
<td>type of cuisine</td>
<td></td>
</tr>
<tr>
<td>revcount</td>
<td><code>IntField()</code></td>
<td>Integer</td>
<td></td>
<td></td>
</tr>
<tr>
<td>loc</td>
<td><code>StringField()</code></td>
<td>String</td>
<td>restaurant address</td>
<td></td>
</tr>
<tr>
<td>menudict</td>
<td><code>ListField(StringField())</code></td>
<td>Array of String (length 36)</td>
<td>object ids of menu item that the restaurant serves</td>
<td></td>
</tr>
</tbody></table>
<h3 id='attributes-model'>Attributes model</h3>
<table><thead>
<tr>
<th>Field Name</th>
<th>Code</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>piclink</td>
<td><code>StringField()</code></td>
<td>String</td>
<td>url of restaurant picture</td>
<td></td>
</tr>
<tr>
<td>addr</td>
<td><code>StringField()</code></td>
<td>String</td>
<td>restaurant address</td>
<td></td>
</tr>
<tr>
<td>cuisines</td>
<td><code>StringField()</code></td>
<td>String</td>
<td>type of cuisine</td>
<td></td>
</tr>
<tr>
<td>diningstyle</td>
<td><code>StringField()</code></td>
<td>String</td>
<td>dining style of cuisine</td>
<td></td>
</tr>
<tr>
<td>dresscode</td>
<td><code>StringField()</code></td>
<td>String</td>
<td>restaurant dress code</td>
<td></td>
</tr>
<tr>
<td>additional</td>
<td><code>StringField()</code></td>
<td>String</td>
<td>additional info of restaurant</td>
<td></td>
</tr>
<tr>
<td>website</td>
<td><code>StringField()</code></td>
<td>String</td>
<td>restaurant website link</td>
<td></td>
</tr>
</tbody></table>
<h2 id='review'>Review</h2><h3 id='review-model'>Review model</h3>
<table><thead>
<tr>
<th>Field Name</th>
<th>Code</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>location</td>
<td><code>StringField(required=True)</code></td>
<td>String of length 36</td>
<td>MongoDb object id of restaurant model</td>
<td><strong>Required</strong></td>
</tr>
<tr>
<td>name</td>
<td><code>StringField(required=True)</code></td>
<td>String</td>
<td>reviewer name</td>
<td><strong>Required</strong></td>
</tr>
<tr>
<td>city</td>
<td><code>StringField(required=True)</code></td>
<td>String</td>
<td>city location name</td>
<td><strong>Required</strong></td>
</tr>
<tr>
<td>overallrating</td>
<td><code>IntField()</code></td>
<td>Integer</td>
<td>overall rating for this review</td>
<td></td>
</tr>
<tr>
<td>subratings</td>
<td><code>EmbeddedDocumentField(Subrating)</code></td>
<td>Subrating model</td>
<td>subrating information for this review</td>
<td></td>
</tr>
<tr>
<td>text</td>
<td><code>StringField()</code></td>
<td>String</td>
<td>review text</td>
<td></td>
</tr>
</tbody></table>
<h3 id='subrating-model'>Subrating model</h3>
<table><thead>
<tr>
<th>Field Name</th>
<th>Code</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>overall</td>
<td><code>IntField()</code></td>
<td>Integer</td>
<td>overall rating</td>
<td></td>
</tr>
<tr>
<td>food</td>
<td><code>IntField()</code></td>
<td>Integer</td>
<td>food rating</td>
<td></td>
</tr>
<tr>
<td>service</td>
<td><code>IntField()</code></td>
<td>Integer</td>
<td>service rating</td>
<td></td>
</tr>
<tr>
<td>ambience</td>
<td><code>IntField()</code></td>
<td>Integer</td>
<td>ambience rating</td>
<td></td>
</tr>
</tbody></table>
<h2 id='user'>User</h2><h3 id='user-model'>User model</h3><h3 id='user-info'>- User info</h3>
<table><thead>
<tr>
<th>Field Name</th>
<th>Code</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td><code>StringField(required=True)</code></td>
<td>String</td>
<td>first and last name of user</td>
<td><strong>Required</strong></td>
</tr>
<tr>
<td>password</td>
<td><code>BinaryField(required=True)</code></td>
<td>Binary</td>
<td>encrypted account password</td>
<td><strong>Required</strong></td>
</tr>
<tr>
<td>email</td>
<td><code>EmailField(required=True, unique=True)</code></td>
<td>Email field</td>
<td>account email</td>
<td><strong>Required</strong></td>
</tr>
<tr>
<td>access</td>
<td><code>EmbeddedDocumentField(Access)</code></td>
<td>Access model</td>
<td>refer to <code>Access</code> model</td>
<td></td>
</tr>
<tr>
<td>phone</td>
<td><code>PhoneField()</code></td>
<td>Phone field</td>
<td>account phone number</td>
<td></td>
</tr>
</tbody></table>
<h3 id='restrictions'>- Restrictions</h3>
<table><thead>
<tr>
<th>Field Name</th>
<th>Code</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>restrictions</td>
<td><code>ListField()</code></td>
<td>Array of String</td>
<td>list of restrictions</td>
<td></td>
</tr>
</tbody></table>
<h3 id='pref-levels'>- Pref levels</h3>
<table><thead>
<tr>
<th>Field Name</th>
<th>Code</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>preferences</td>
<td><code>DictField(default = {})</code></td>
<td>Dictionary (key = string, value = integer)</td>
<td>key-value pair of user preferences</td>
<td></td>
</tr>
<tr>
<td>processed_prefs</td>
<td><code>DynamicField()</code></td>
<td>Array of String</td>
<td>cached preferences after being processed by dsci</td>
<td></td>
</tr>
</tbody></table>
<h3 id='other'>- Other</h3>
<table><thead>
<tr>
<th>Field Name</th>
<th>Code</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>created_on</td>
<td><code>DateTimeField(default = datetime.now)</code></td>
<td>DateTime field</td>
<td>indicates when this account was generated</td>
<td></td>
</tr>
<tr>
<td>fav_restaurant</td>
<td><code>StringField()</code></td>
<td>String of length 36</td>
<td>reference to restaurant model</td>
<td></td>
</tr>
</tbody></table>
<h3 id='access-model'>Access model</h3>
<table><thead>
<tr>
<th>Field Name</th>
<th>Code</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>user</td>
<td><code>BooleanField(default=False)</code></td>
<td>Boolean</td>
<td>is this account &quot;user&quot; level?</td>
<td></td>
</tr>
<tr>
<td>admin</td>
<td><code>BooleanField(default=False)</code></td>
<td>Boolean</td>
<td>is this account &quot;admin&quot; level?</td>
<td></td>
</tr>
<tr>
<td>googlelogin</td>
<td><code>BooleanField(default=False)</code></td>
<td>Boolean</td>
<td>is this account &quot;googlelogin&quot; level?</td>
<td></td>
</tr>
<tr>
<td>facebooklogin</td>
<td><code>BooleanField(default=False)</code></td>
<td>Boolean</td>
<td>is this account &quot;facebooklogin&quot; level?</td>
<td></td>
</tr>
<tr>
<td>guest</td>
<td><code>BooleanField(default=False)</code></td>
<td>Boolean</td>
<td>is this account &quot;guest&quot; level?</td>
<td></td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<p>Menu Backend API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid. Could be: <code>Request not json</code>, <code>Update failure</code>, or <code>Deletion failure</code>.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Authorization has been refused for the given credentials</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The current user is not authorized to take this action.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- This route is currently not supported.</td>
</tr>
<tr>
<td>409</td>
<td>Something is Invalid - Could be: <code>This email is already taken or the email address is wrong</code>, <code>The user did not authorize the use of their email</code>, <code>This username is already taken</code>, or <code>Invalid token provided</code>.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server.</td>
</tr>
</tbody></table>
<h2 id='error-ids'>Error Ids</h2>
<p>Look for specific error ids here!</p>

<table><thead>
<tr>
<th>Error Id</th>
<th>Name of Error</th>
<th>Error message</th>
<th>Status Code</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td><code>request_not_json</code></td>
<td>Data type in request is not JSON</td>
<td>400</td>
</tr>
<tr>
<td>2</td>
<td><code>unauthorized</code></td>
<td>Authorization has been revoked</td>
<td>401</td>
</tr>
<tr>
<td>3</td>
<td><code>forbidden</code></td>
<td>Current user is not allowed to take this action</td>
<td>403</td>
</tr>
<tr>
<td>4</td>
<td><code>invalid_route</code></td>
<td>This route is currently not supported</td>
<td>404</td>
</tr>
<tr>
<td>5</td>
<td><code>invalid_email</code></td>
<td>This email is already taken or the email address is wrong</td>
<td>409</td>
</tr>
<tr>
<td>6</td>
<td><code>oauth_scopes_unauthorized</code></td>
<td>The user did not authorize the use of their email</td>
<td>409</td>
</tr>
<tr>
<td>7</td>
<td><code>invalid_username</code></td>
<td>This username is already taken</td>
<td>409</td>
</tr>
<tr>
<td>8</td>
<td><code>invalid_token</code></td>
<td>Invalid token provided</td>
<td>409</td>
</tr>
<tr>
<td>9</td>
<td><code>update_failure</code></td>
<td>Database document update failed</td>
<td>400</td>
</tr>
<tr>
<td>10</td>
<td><code>deletion_failure</code></td>
<td>Database document deletion failed</td>
<td>400</td>
</tr>
<tr>
<td>11</td>
<td><code>validation_error</code></td>
<td>Marshmallow validation has failed</td>
<td>400</td>
</tr>
<tr>
<td>12</td>
<td><code>mongodb_get_object_error</code></td>
<td>MongoDB document get request has failed</td>
<td>500</td>
</tr>
<tr>
<td>13</td>
<td><code>all_other_error</code></td>
<td>This error message corresponds to all other errors</td>
<td>500</td>
</tr>
<tr>
<td>14</td>
<td><code>wrong_login_route</code></td>
<td>You cannot attempt login to <code>/auth/login/</code> without <code>user</code> access field being True</td>
<td>401</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
